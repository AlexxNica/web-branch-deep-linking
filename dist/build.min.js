(function() {function f(b,a){throw Error(k(b,a));}function k(b,a){return b.replace(/\$(\d)/g,function(c,b){return a[parseInt(b)-1]})}function l(){return JSON.parse(sessionStorage.getItem("branch_session"))||{}}function m(b){sessionStorage.setItem("branch_session",JSON.stringify(b))}function q(b,a){var c=l();c[b]=a;m(c)}function t(){var b={url:document.URL,user_agent:navigator.userAgent,language:navigator.language},a={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}
function u(){try{return location.hash.match(/r:([^&]*)/)[1]}catch(b){return""}};function v(b){var a=b.openAppButtonText||"View in app";b=b.downloadAppButtonText||"Download App";return'<a id="branch-mobile-action" href="#">'+(l().has_app?a:b)+"</a>"}function w(){var b=document.getElementById("branch-banner");b&&b.parentNode.removeChild(b)}
function x(b,a){var c=document.getElementById("branch-sms-phone");if(c){var d=c.value;/^\d{7,}$/.test(d.replace(/[\s()+\-\.]|ext/gi,""))?b.r({v:d,data:a.data||{}},function(){document.getElementById("branch-sms-block").innerHTML='<span class="sms-sent">Link sent to '+d+"</span>"}):c.className="error"}}function y(){setTimeout(function(){w();w()},270);setTimeout(function(){document.body.style.marginTop="0px"},20);document.getElementById("branch-banner").style.top="-76px";q("hideBanner",!0)}
function z(){return navigator.userAgent.match(/android|i(os|p(hone|od|ad))/i)?navigator.userAgent.match(/android/i)?"android":"ios":!1}function A(b,a){return a&&!z()||b&&z()}
function B(b,a,c,d){if(A(c,d)){c=document.createElement("div");z()?(b.link({channel:"appBanner",data:a.data||{}},function(a,c){document.getElementById("branch-mobile-action").href=c}),c.innerHTML=v(a)):c.innerHTML='<div id="branch-sms-block"><input type="phone" name="branch-sms-phone" id="branch-sms-phone" placeholder="(999) 999-9999"><button id="branch-sms-send">Send Link</button></div>';document.getElementById("branch-banner-action").appendChild(c);try{document.getElementById("branch-sms-send").addEventListener("click",
function(){x(b,a)})}catch(e){}document.getElementById("branch-banner-close").onclick=y}}function C(b,a){A(b,a)&&(document.body.style.marginTop="71px",setTimeout(function(){document.getElementById("branch-banner").style.top="0"},20))};function D(b,a){var c=[];a=a||"";if(b instanceof Array)for(var d=0;d<b.length;d++)c.push(encodeURIComponent(a)+"[]="+encodeURIComponent(b[d]));else for(d in b)b.hasOwnProperty(d)&&(b[d]instanceof Array||"object"==typeof b[d]?c.push(D(b[d],a?a+"."+d:d)):c.push(encodeURIComponent(a?a+"."+d:d)+"="+encodeURIComponent(b[d])));return c.join("&")}
function E(b,a){var c,d=b.e+b.b;if(b.d)for(c in b.d)b.d.hasOwnProperty(c)&&(b.d[c](b.b,c,a[c]),d+="/"+a[c]);var e={};for(c in b.a)if(b.a.hasOwnProperty(c)){var g=b.a[c](b.b,c,a[c]);"undefined"!=typeof g&&""!==g&&null!==g&&(e[c]=g)}return{data:D(e),url:d}}
var F=0,G=function(){var b={f:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l:function(a){var c="",d,e,g,h,p,n,r=0;for(a=b.k(a);r<a.length;)d=a.charCodeAt(r++),e=a.charCodeAt(r++),g=a.charCodeAt(r++),h=d>>2,d=(d&3)<<4|e>>4,p=(e&15)<<2|g>>6,n=g&63,isNaN(e)?p=n=64:isNaN(g)&&(n=64),c=c+this.f.charAt(h)+this.f.charAt(d)+this.f.charAt(p)+this.f.charAt(n);return c},t:function(a){var c="",d,e,g,h,p,n=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");n<a.length;)d=this.f.indexOf(a.charAt(n++)),
e=this.f.indexOf(a.charAt(n++)),h=this.f.indexOf(a.charAt(n++)),p=this.f.indexOf(a.charAt(n++)),d=d<<2|e>>4,e=(e&15)<<4|h>>2,g=(h&3)<<6|p,c+=String.fromCharCode(d),64!=h&&(c+=String.fromCharCode(e)),64!=p&&(c+=String.fromCharCode(g));return c=b.j(c)},k:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",b=0;b<a.length;b++){var e=a.charCodeAt(b);128>e?c+=String.fromCharCode(e):(127<e&&2048>e?c+=String.fromCharCode(e>>6|192):(c+=String.fromCharCode(e>>12|224),c+=String.fromCharCode(e>>6&63|128)),c+=
String.fromCharCode(e&63|128))}return c},j:function(a){for(var c="",b=0,e=c1=c2=0;b<a.length;)e=a.charCodeAt(b),128>e?(c+=String.fromCharCode(e),b++):191<e&&224>e?(c2=a.charCodeAt(b+1),c+=String.fromCharCode((e&31)<<6|c2&63),b+=2):(c2=a.charCodeAt(b+1),c3=a.charCodeAt(b+2),c+=String.fromCharCode((e&15)<<12|(c2&63)<<6|c3&63),b+=3);return c}};return{send:function(a,c){var d=c.s||"branch_callback__"+F++,e=c.n||function(){},g=c.o||function(){},h;"POST"==c.method&&(h=encodeURIComponent(b.l(JSON.stringify(c.data)))||
"");var p="&data=";0<=a.indexOf("bnc.lt")&&(p="&post_data=");var n=window.setTimeout(function(){window[d]=function(){};g()},1E3*(c.timeout||10));window[d]=function(a){window.clearTimeout(n);e(a)};var r=document.createElement("script");r.type="text/javascript";r.async=!0;r.src=a+(0>a.indexOf("?")?"?":"")+(h?p+h:"")+"&callback="+d+(0<=a.indexOf("/c/")?"&click=1":"");document.getElementsByTagName("head")[0].appendChild(r)}}}();
function H(b,a,c,d){G.send(b,{n:function(a){d(null,a)},o:function(){d({error:"Request timed out."})},timeout:3,data:a,method:c})}
function I(b,a,c){c=c||function(){};var d=E(b,a),e,g="";"GET"==b.method?e=d.url+"?"+d.data:(e=d.url,g=d.data);if(sessionStorage.getItem("use_jsonp")||b.m)H(e,a,b.method,c);else{var h=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");h.onreadystatechange=function(){if(4===h.readyState&&200===h.status)try{c(null,JSON.parse(h.responseText))}catch(a){c(null,{})}else 4===h.readyState&&402===h.status?c(Error("Not enough credits to redeem.")):4===h.readyState&&"4"!=h.status.substring(0,
1)&&c(Error("Error in API: "+h.status))};try{h.open(b.method,e,!0),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g)}catch(p){sessionStorage.setItem("use_jsonp",!0),H(e,a,b.method,c)}}};function J(b,a){return function(c,d,e){e?0==a?"object"!=typeof e&&f("API request $1, parameter $2 is not $3",[c,d,"an object"]):3==a?e instanceof Array||f("API request $1, parameter $2 is not $3",[c,d,"an array"]):1==a?"string"!=typeof e&&f("API request $1, parameter $2 is not $3",[c,d,"a string"]):2==a?"number"!=typeof e&&f("API request $1, parameter $2 is not $3",[c,d,"a number"]):a&&(a.test(e)||f("API request $1, parameter $2 is not $3",[c,d,"in the proper format"])):b&&f("API request $1 missing parameter $2",
[c,d]);return e}}
var K=/^[0-9]{15,20}$/,L={e:"https://api.branch.io",b:"/v1/open",method:"POST",a:{app_id:J(!0,K),identity_id:J(!1,K),link_identifier:J(!1,1),is_referrable:J(!0,2),browser_fingerprint_id:J(!0,K)}},M={e:"https://api.branch.io",b:"/v1/profile",method:"POST",a:{app_id:J(!0,K),identity_id:J(!0,K),identity:J(!0,1)}},N={e:"https://api.branch.io",b:"/v1/logout",method:"POST",a:{app_id:J(!0,K),session_id:J(!0,K)}},O={e:"https://api.branch.io",b:"/v1/referrals",method:"GET",d:{identity_id:J(!0,K)}},P={e:"https://api.branch.io",
b:"/v1/credits",method:"GET",d:{identity_id:J(!0,K)}},Q={e:"https://bnc.lt",b:"/_r",method:"GET",m:!0,a:{app_id:J(!0,K)}},R={e:"https://api.branch.io",b:"/v1/redeem",method:"POST",a:{app_id:J(!0,K),identity_id:J(!0,K),amount:J(!0,2),bucket:J(!1,1)}},S={e:"https://api.branch.io",b:"/v1/url",method:"POST",w:"obj",a:{app_id:J(!0,K),identity_id:J(!0,K),data:J(!1,1),tags:J(!1,3),feature:J(!1,1),channel:J(!1,1),stage:J(!1,1),type:J(!1,2)}},aa={e:"https://bnc.lt",b:"",method:"GET",d:{link_url:J(!0,1)},a:{click:J(!0,
1)}},ba={e:"https://bnc.lt",b:"/c",method:"POST",d:{link_url:J(!0,1)},a:{phone:J(!0,1)}},ca={e:"https://api.branch.io",b:"/v1/event",method:"POST",a:{app_id:J(!0,K),session_id:J(!0,K),event:J(!0,1),metadata:J(!0,0)}};var T;function U(){if(!(this instanceof U))return T||(T=new U),T;this.c=!1}function V(b,a,c,d){(a.a&&a.a.app_id||a.d&&a.d.app_id)&&b.i&&(c.app_id=b.i);(a.a&&a.a.session_id||a.d&&a.d.session_id)&&b.h&&(c.session_id=b.h);(a.a&&a.a.identity_id||a.d&&a.d.identity_id)&&b.g&&(c.identity_id=b.g);I(a,c,d)}
U.prototype.init=function(b,a){function c(a){delete a.session_id;delete a.identity_id;delete a.link;delete a.device_fingerprint;delete a.device_fingerprint_id;delete a.browser_fingerprint_id;return a}a=a||function(){};if(this.c)return a(k("Branch SDK already initilized"));this.c=!0;this.i=b;var d=this,e=l();e&&!e.session_id&&(e=null);e&&(this.h=e.session_id,this.g=e.identity_id,this.q=e.link);e&&!u()?a(null,c(e)):V(this,Q,{},function(b,e){V(d,L,{link_identifier:u(),is_referrable:1,browser_fingerprint_id:e},
function(b,e){d.h=e.session_id;d.g=e.identity_id;d.q=e.link;m(e);a(b,c(e))})})};U.prototype.setIdentity=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));V(this,M,{identity:b},function(b,d){a(b,d)})};U.prototype.logout=function(b){b=b||function(){};if(!this.c)return b(k("Branch SDK not initialized"));V(this,N,{},function(a,c){b(a,c)})};
U.prototype.track=function(b,a,c){c=c||function(){};if(!this.c)return c(k("Branch SDK not initialized"));"function"==typeof a&&(c=a,a={});V(this,ca,{event:b,metadata:t()},function(a,b){c(a,b)})};U.prototype.link=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));b.source="web-sdk";void 0!==b.data.$desktop_url&&(b.data.$desktop_url=b.data.$desktop_url.replace(/#r:[a-z0-9-_]+$/i,""));b.data=JSON.stringify(b.data);V(this,S,b,function(b,d){"function"==typeof a&&a(b,d.url)})};
U.prototype.linkClick=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));b&&V(this,aa,{link_url:b.replace("https://bnc.lt/",""),click:"click"},function(b,d){q("click_id",d.click_id);(b||d)&&a(b,d)})};U.prototype.sendSMS=function(b,a,c){a=a||function(){};c=c||!1;if(!this.c)return a(k("Branch SDK not initialized"));l().click_id&&!c?this.p(b.phone,a):this.A(b,a)};
U.prototype.sendSMSNew=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));b.channel="sms";var c=this;this.link(b,function(d,e){if(d)return a(d);c.u(e,function(d){var e=b.phone;if(d)return a(d);c.p(e,function(b,c){a(b,c)})})})};U.prototype.sendSMSExisting=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));V(this,ba,{link_url:l().click_id,phone:b},function(b,d){a(b,d)})};
U.prototype.referrals=function(b){b=b||function(){};if(!this.c)return b(k("Branch SDK not initialized"));V(this,O,{},function(a,c){b(a,c)})};U.prototype.credits=function(b){b=b||function(){};if(!this.c)return b(k("Branch SDK not initialized"));V(this,P,{},function(a,c){b(a,c)})};U.prototype.redeem=function(b,a){a=a||function(){};if(!this.c)return a(k("Branch SDK not initialized"));V(this,R,{amount:b.amount,bucket:b.bucket},function(b,d){a(b,d)})};
U.prototype.banner=function(b,a,c){a=void 0==a?!0:a;c=void 0==c?!0:c;if(!document.getElementById("branch-banner")&&!l().hideBanner){if(A(a,c)){var d=document.createElement("div");d.id="branch-banner";d.innerHTML='<div class="content"><div class="left"><div class="close-x" id="branch-banner-close">&times;</div><div class="icon" style="float: left;"><img src="'+b.icon+'"></div><div class="details"><span class="title">'+b.title+'</span><span class="description">'+b.description+'</span></div></div><div class="right" id="branch-banner-action"></div></div>';
document.body.appendChild(d)}var d=a,e=c;if(A(d,e)){var g=document.createElement("style");g.type="text/css";g.id="branch-css";g.innerHTML='body { -webkit-transition: all 0.375s ease; transition: all 00.375s ease; }#branch-banner { top: -76px; width: 100%; font-family: Helvetica Neue, Sans-serif; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; -webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all 0.25s ease; transition: all 00.25s ease; }#branch-banner .close-x { float: left; font-weight: 400; margin-right: 6px; margin-left: 0; cursor: pointer; }#branch-banner .content { position: absolute; width: 100%; height: 76px; z-index: 99999; background: rgba(255, 255, 255, 0.95); color: #333; border-bottom: 1px solid #ddd; }#branch-banner .content .left { width: 70%; float: left; padding: 8px 8px 8px 8px; }#branch-banner .content .left .icon img { width: 60px; height: 60px; margin-right: 6px; }#branch-banner .content .right a { font-size: 14px; font-weight: 500; }#branch-banner-action div { float: right; margin-right: 8px; }#branch-banner .content:after { content: ""; position: absolute; left: 0; right: 0; top: 100%; height: 1px; background: rgba(0, 0, 0, 0.2); }#branch-banner .content .left .details { margin-top: 3px; padding-left: 4px; }#branch-banner .content .left .details .title { font: 14px/1.5em HelveticaNeue-Medium, Helvetica Neue Medium, Helvetica Neue, Sans-serif; color: rgba(0, 0, 0, 0.9); display: inline-block; }#branch-banner .content .left .details .description { font-size: 12px; font-weight: normal; line-height: 1.5em; color: rgba(0, 0, 0, 0.5); display: block; }#branch-banner .content .right { display:inline-block; position: relative; top: 50%; transform: translateY(-50%); -webkit-transform: translateY(-50%); }';
var h=z();"ios"==h&&d?g.innerHTML+='body { -webkit-transition: all 0.375s ease; transition: all 00.375s ease; }#branch-banner { position: absolute; top: -76px; width: 100%; font-family: Helvetica Neue, Sans-serif; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; -webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all 0.25s ease; transition: all 00.25s ease; }#branch-banner .close-x { color: #aaa; margin-top: 13px; font-size: 20px; float: left; font-weight: 400; color: #aaa; font-size: 20px; margin-top: 13px; margin-right: 6px; margin-left: 0; cursor: pointer; }#branch-banner .content { position: absolute; width: 100%; height: 76px; z-index: 99999; background: rgba(255, 255, 255, 0.95); color: #333; border-bottom: 1px solid #ddd; }#branch-banner .content .left { width: 70%; float: left; padding: 8px 8px 8px 8px; }#branch-banner .content .left .icon img { width: 60px; height: 60px; margin-right: 6px; }#branch-banner .content .right a { font-size: 14px; font-weight: 500; color: #007aff; color: #007aff; }#branch-banner-action div { float: right; margin-right: 8px; }#branch-banner .content:after { content: ""; position: absolute; left: 0; right: 0; top: 100%; height: 1px; background: rgba(0, 0, 0, 0.2); }#branch-banner .content .left .details { margin-top: 3px; padding-left: 4px; }#branch-banner .content .left .details .title { font: 14px/1.5em HelveticaNeue-Medium, Helvetica Neue Medium, Helvetica Neue, Sans-serif; color: rgba(0, 0, 0, 0.9); display: inline-block; }#branch-banner .content .left .details .description { font-size: 12px; font-weight: normal; line-height: 1.5em; color: rgba(0, 0, 0, 0.5); display: block; }#branch-banner .content .right { display:inline-block; position: relative; top: 50%; transform: translateY(-50%); -webkit-transform: translateY(-50%); }':
"android"==h&&d?g.innerHTML+="#branch-banner { position: absolute; }#branch-banner .close-x { text-align: center; font-size: 15px; border-radius:14px; border:0; width:17px; height:17px; line-height:14px; color:#b1b1b3; background:#efefef; }#branch-mobile-action { text-decoration:none; border-bottom: 3px solid #b3c833; padding: 0 10px; height: 24px; line-height: 24px; text-align: center; color: #fff; font-weight: bold; background-color: #b3c833; border-radius: 5px; }#branch-mobile-action:hover { border-bottom:3px solid #8c9c29; background-color: #c1d739; }":
e&&(g.innerHTML+="#branch-banner .content .left { width: 50% }#branch-banner .close-x { color: #aaa; margin-top: 13px; font-size: 20px; }#branch-banner .content .right { width: 50% }#branch-banner { position: fixed; }#branch-banner .content .right a { color: #007aff; }#branch-banner .content .right input { font-weight: 400; border-radius: 4px; height: 30px; border: 1px solid #ccc; padding: 5px 7px 4px; width: 125px; font-size: 14px; }#branch-banner .content .right button { margin-top: 0px; display: inline-block; height: 30px;; float: right; margin-left: 5px; font-weight: 400; border-radius: 4px; border: 1px solid #ccc; background: #fff; color: #000; padding: 0px 12px; }#branch-banner .content .right button:hover { border: 1px solid #BABABA; background: #E0E0E0; }#branch-banner .content .right input:focus, button:focus { outline: none; }#branch-banner .content .right input.error { color: rgb(194, 0, 0); border-color: rgb(194, 0, 0); }#branch-banner .content .right span { display: inline-block; font-weight: 400; margin: 7px 9px; font-size: 14px; }");
document.head.appendChild(g);document.getElementById("branch-banner").style.top="-76px"}B(this,b,a,c);C(a,c)}};var W=new U;if(window.branch&&window.branch._q)for(var X=window.branch._q,Y=0;Y<X.length;Y++){var Z=X[Y];W[Z[0]].apply(W,Z[1])};"function"===typeof define&&define.amd?define("branch",function(){return W}):"object"===typeof exports&&(module.exports=W);window&&(window.branch=W);})();
