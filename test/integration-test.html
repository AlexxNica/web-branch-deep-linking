<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Integration Tests for Branch</title>
</head>
<body>
	<div id="mocha"></div>
	<link rel="stylesheet" type="text/css" href="../node_modules/mocha/mocha.css" />
	<script src="../compiler/library/closure-library-master/closure/goog/base.js"></script>
	<script>
		goog.addDependency("../../../../../src/0_config.js", ['config'], []);
		goog.addDependency("../../../../../src/0_utils.js", ['utils'], []);
		goog.addDependency("../../../../../src/0_storage.js", ['storage'], []);
	</script>
	<script src="../node_modules/mocha/mocha.js"></script>
	<script src="../node_modules/sinon/pkg/sinon-1.13.0.js"></script>
	<script src="test-utils.js"></script>
	<script type="text/javascript">
		mocha.ui('bdd');
		mocha.reporter('html');
	</script>

	<script type="text/javascript">
		(function(root, doc, scriptStr, branchStr, createCallback, branchSdk, funcs, i, scriptTag, firstScript) {
	if (!root[branchStr] || !root[branchStr]._q) {
		while (i < funcs.length) {
			createCallback(branchSdk, funcs[i++]);
		}

		scriptTag = doc.createElement(scriptStr);
		scriptTag.async = 1;
		scriptTag.src = '../dist/web/build.js';
		firstScript = doc.getElementsByTagName(scriptStr)[0];
		firstScript.parentNode.insertBefore(scriptTag, firstScript);

		root[branchStr] = branchSdk;
	}
})(window, document, 'script', 'branch', function(branch, name) {
	branch[name] = function() {
		branch._q.push([ name, arguments ]);
	};
}, { _q: [], _v: 1 }, // _q: the "queue" of calls, _v: the "version" of the embed script
'init;data;setIdentity;logout;track;link;sendSMS;referrals;credits;redeem;banner;closeBanner'.split(';'), 0);
	</script>

	<script type="text/javascript" src="4_integration.js"></script>

	<script type="text/javascript">
		if (window.mochaPhantomJS) { mochaPhantomJS.run(); }
		else { mocha.run(); }
	</script>
</body>
</html>
